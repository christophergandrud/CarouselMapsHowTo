<!DOCTYPE html>
<html>
<head>
  <title>How-to Create Timeline Maps</title>
  <meta charset="utf-8">
  <meta name="description" content="How-to Create Timeline Maps">
  <meta name="author" content="Christopher Gandrud">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    <link rel="stylesheet" href = "assets/css/ribbons.css">

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <hgroup class="auto-fadein">
        <h1>How-to Create Timeline Maps</h1>
        <h2>with googleVis and Twitter Bootstrap's Carousel</h2>
        <p>Christopher Gandrud<br/>Yonsei University</p>
      </hgroup>
      <a href="https://github.com/christophergandrud/CarouselMapsHowTo/zipball/gh-pages" class="example">
        Download
      </a>
          </slide>

    <!-- SLIDES -->
      <slide class="" id="slide-1" style="background:;">
  <hgroup>
    <h2>Motivation</h2>
  </hgroup>
  <article>
    <p><br />
<br />
<br /></p>

<h3>I like using <a href="http://code.google.com/p/google-motion-charts-with-r/">googleVis</a> in R to quickly create nice interactive <a href="https://developers.google.com/chart/interactive/docs/gallery/geomap">Google Geomaps</a>.</h3>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Example: Single Time Map</h2>
  </hgroup>
  <article>
    <iframe src = "http://dl.dropbox.com/u/12581470/Graphs/leg.violence.map.html"></iframe>

<p><a href="http://dl.dropbox.com/u/12581470/Graphs/leg.violence.webpage.html">Here are more details about this map.</a></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-3" style="background:;">
  <hgroup>
    <h2>Motivation</h2>
  </hgroup>
  <article>
    <p><br />
<br />
<br /></p>

<h3>This is great for individual maps.</h3>

<p><br /></p>

<h3>But I wanted to be able to put a series of Geomaps in a timeline and have them play as an animation or slide show.</h3>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-4" style="background:;">
  <hgroup>
    <h2>Current Tools</h2>
  </hgroup>
  <article>
    <p><br /></p>

<h3>There are a number of ways to create timeline maps in R. Here are some recent examples:</h3>

<p><br /></p>

<ul>
<li><p>An animated map of 2012 <a href="http://civilstat.com/?p=876&amp;utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=animated-map-of-2012-us-election-campaigning-with-r-and-ffmpeg">US election campaign trips</a>.</p></li>
<li><p>Visualisation of <a href="http://sappingattention.blogspot.kr/2012/04/visualizing-ocean-shipping.html">ocean shipping</a>.</p></li>
<li><p>Growth in <a href="http://rstats.wordpress.com/2011/03/15/visualizing-store-growth/">US Walmart stores</a>.</p></li>
<li><p><a href="http://lamages.blogspot.co.uk/2012/03/change-in-life-expectancy-animated-with.html">Life expectancy with googleVis</a> This example gives an alternative way to do what we are doing here.</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Current Tools</h2>
  </hgroup>
  <article>
    <p><br />
<br /></p>

<ul>
<li><p>Many of these examples use the really helpful <a href="http://cran.r-project.org/web/packages/animation/index.html">animation</a> package.</p></li>
<li><p>The <code>animation</code> package pieces together a series of images created by R. These are playable as an HTML webpage, a GIF, a PDF, and so on. </p></li>
<li><p>However, I wasn&#39;t able to use the package with googleVis to produce interactive maps.</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>The Solution</h2>
  </hgroup>
  <article>
    <p><br /></p>

<p>The solution I came up with was to use the <a href="http://twitter.github.com/bootstrap/javascript.html#carousel">Carousel plugin</a> from <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>

<p><br /></p>

<ul>
<li><p>The Carousel plugin creates a slideshow with <a href="http://jquery.com/">jquery</a>. Usually Carousel slide shows include static images, but you can include <code>iframe</code>s in them as well.</p></li>
<li><p>Placing the maps in <code>iframe</code>s in a Carousel <code>&lt;div&gt;</code> tag completely preserves their interactivity.</p></li>
<li><p>The default formatting obviously matches nicely with Twitter Bootstrap produced <a href="http://builtwithbootstrap.com/">websites</a>.</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>Example: Timeline Map</h2>
  </hgroup>
  <article>
    <iframe src="http://christophergandrud.github.com/amc-site/maps.html"></iframe>

<p>Scroll down to see the whole map.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-8" style="background:;">
  <hgroup>
    <h2>The Steps: Overview</h2>
  </hgroup>
  <article>
    <p><br /></p>

<h3>There are 3 general steps to create interactive timeline maps with googleVis &amp; Carousel:</h3>

<p><br /></p>

<ol>
<li><p>Create a series of googleVis maps in R.</p></li>
<li><p>Include these maps in Carousel <code>div</code> tags on an HTML page.</p></li>
<li><p>Publish.</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-9" style="background:;">
  <hgroup>
    <h2>The Steps: R.1</h2>
  </hgroup>
  <article>
    <h3>First create a function to build the maps in R.</h3>

<p>I did this by writing a simple function I called <code>MapAMC</code> (<a href="https://github.com/christophergandrud/amcData/blob/master/SourceCode/Descriptive/AMCTotalMaps.R">Full replication code</a>).</p>

<pre><code class="r">library(googleVis)
MapAMC &lt;- function(y){
                      yearTemp &lt;- y  
                      TempMap &lt;-  gvisGeoMap(subset(Full, year == yearTemp &amp;
                                              TotalAmcCreated != 0), 
                                              locationvar = &quot;ISOCode&quot;, 
                                              numvar = &quot;TotalAmcCreated&quot;,
                                              options = list(
                                                colors = &quot;[0xECE7F2, 0xA6BDDB, 0x2B8CBE]&quot;,
                                                width = &quot;780px&quot;,
                                                height = &quot;500px&quot;
                                                ))

  print(TempMap, file = paste(&quot;AMCMap&quot;, yearTemp, &quot;.html&quot;, sep = &quot;&quot;), tag = &quot;chart&quot;)
}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-10" style="background:;">
  <hgroup>
    <h2>The Steps: R.2</h2>
  </hgroup>
  <article>
    <h3>Then run the command.</h3>

<p>I ran a vector of containing the years I wanted to map through the <code>MapAMC</code> function with <code>lapply</code>:</p>

<pre><code class="r">Years &lt;- c(1980, 1985, 1990, 1995, 2000, 2005, 2011)

lapply(Years, MapAMC)
</code></pre>

<p>In this example, seven HTML files will be saved in the working directory.</p>

<p>You probably want to have them put into the same directory that the framing website is in.</p>

<p>To make things tidy, I put the maps into a folder called <code>BaseMaps</code> in a subdirectory of the file where the website&#39;s markup file is located.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>The Steps: HTML.1</h2>
  </hgroup>
  <article>
    <h3>Open the HTML file of the webpage you are using to frame the maps.</h3>

<p>In the header, declare where <code>jquery</code> and the Carousel javascript files are located. </p>

<p>I linked directly to Twitter Bootstrap&#39;s originals:</p>

<pre><code class="html">&lt;script type=&quot;text/javascript&quot; 
  src=&quot;http://twitter.github.com/bootstrap/assets/js/jquery.js&quot;&gt;
&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot; 
  src=&quot;https://raw.github.com/twitter/bootstrap/master/js/bootstrap-carousel.js&quot;&gt;
&lt;/script&gt;
</code></pre>

<p><strong>Note:</strong> if you are using <a href="http://jekyllbootstrap.com/">Jekyll</a> with <a href="http://pages.github.com/">GitHub Pages</a> (recommended), you will want to include this code at the <strong>end</strong> of the markup file. </p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>The Steps: HTML.2</h2>
  </hgroup>
  <article>
    <h3>Now add the Carousel into your website&#39;s markup file.</h3>

<p>A basic Carousel <code>div</code> tag structure goes something like this:</p>

<pre><code class="html">&lt;div id=&quot;MyMap&quot; class=&quot;carousel slide&quot;&gt;
  &lt;div class=&quot;carousel-inner&quot;&gt;
    &lt;div class=&quot;active item&quot;&gt;
      &lt;iframe src=&quot;BaseMaps/AMCMap1980.html&quot; height = 560 width = 800&gt;
      &lt;/iframe&gt;
        &lt;div class=&quot;carousel-caption&quot;&gt;
          1980
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<p><a href="https://github.com/christophergandrud/amc-site/blob/gh-pages/maps.html">HERE</a> is the full code for the example.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>The Steps: Publish</h2>
  </hgroup>
  <article>
    <p><br />
<br />
<br /></p>

<h3>Finally publish the website however you want.</h3>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Backmatter</h2>
  </hgroup>
  <article>
    <h3>Contact:</h3>

<p>If you have any suggestions or comments you can reach me through my <a href="http://christophergandrud.blogspot.com/">blog</a> or <a href="https://twitter.com/ChrisGandrud">@ChrisGandrud</a></p>

<p><br /></p>

<h3>Thanks to:</h3>

<ul>
<li><p><a href="http://lamages.blogspot.com/">Markus Gesmann</a> for creating the googleVis package.</p></li>
<li><p>The people behind Twitter Bootstrap, including <a href="https://twitter.com/mdo">Mark Otto</a> and <a href="https://twitter.com/fat">fat-kun</a>.</p></li>
<li><p><a href="https://twitter.com/ramnath_vaidya">Ramnath Vaidyanathan</a>, who created the <a href="http://ramnathv.github.com/slidify/">Slidify</a> package that I used to make this slide show in R.</p></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
</html>